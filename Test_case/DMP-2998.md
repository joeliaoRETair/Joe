## 下面的test是由兩個jira單合併一起,分別為DMP-2889,DMP-2963
## DMP-2899 Support multiple key-values in Audience Overlap Analysis  
## DMP-2963 UI - Date Range Support on Audience Overlapping Analysis

### Preconditions :
> 1. 在taxonomy建立好Attribute  
"興趣":{"跑步","看書","看電影","逛街","吃美食","籃球","排球"}  
"喜歡吃的食物":{"美式","義式","泰式","日式"}  
"喜歡的英雄":{"鋼鐵人","索爾","浩克","美國隊長","黑寡婦"}
"居住地":{"台北","台中","彰化","高雄"}  
"性別":{"男","女"}  
> 2. 將Attribute(興趣,喜歡吃的食物,喜歡的英雄)的isMultiple設定為true(目前只能用API來做設定)  
PS:要等待晚上跑過Segment才能做測試  
> 3. 將 Audience 這些 Attribute (目前只能用上傳檔案的方式設定attribute)  
> PS:沒有設定Date range是看昨天晚上跑完的audience segment

### Precondition for test date range:
> 4. 需要取得member的retuid並且打帶有member retuid 的 log  
log範例:http://icemdev.retchat.com/t/?a=1720&cat=18-10572198132&cert=8b64c1e75fb8188a631c263a7fb1e8d4&app=WEB&retUid=UPLOAD-60c23ece-49d1-4836-807b-b37e95c1a013  
>PS:有設定Date Range的則是看cassandra的dmp_user_profile中FIRSTVISIT的日期

### Summary:測試勾選1個Tag name isMultiple為true的Attributes是否正常運作
Step action:
1. 進入Audience Overlap Analysis頁面 
2. 勾選1個Attribute且Tag name 為Allow Multiple Value 為 Ture 的Attributes  
EX:Tag Name:喜歡的英雄,Attribute:鋼鐵人
3. 檢查圖表有無正確顯示  

預期結果:成功顯示,並且資料正確  
實際結果:與預期結果相同

4. 選取 Audience Overlap Analysis - Label Overlapped 的 Date 為 Today (有打入log的當天)
5. 檢查圖表是否正確顯示

預期結果:成功顯示,並且資料正確  
實際結果:與預期結果相同

6. 選取 Audience Overlap Analysis - Label Overlapped 的 Date 為 Yesterday (沒有打入log的日期)
7. 檢查圖表是否沒有資料顯示

預期結果:圖表無資料顯示  
實際結果:與預期結果相同

### Summary:測試勾選2個相同Tag name且Tag name 為Allow Multiple Value 為 Ture 的Attributes是否正常運作
Step action:
1. 進入Audience Overlap Analysis頁面
2. 勾選2個相同Tag name且Tag name 為Allow Multiple Value 為 Ture 的Attributes  
EX:Tag Name:喜歡的英雄,Attribute:鋼鐵人 ; Tag Name:喜歡的英雄,Attribute:索爾
3. 檢查有無跳出錯誤顯示圖表有無正確顯示

預期結果:成功顯示,並且資料正確  
實際結果:與預期結果相同

4. 選取 Audience Overlap Analysis - Label Overlapped 的 Date 為 Today (有打入log的當天)
5. 檢查圖表是否正確顯示

預期結果:成功顯示,並且資料正確  
實際結果:與預期結果相同

6. 選取 Audience Overlap Analysis - Label Overlapped 的 Date 為 Yesterday (沒有打入log的日期)
7. 檢查圖表是否沒有資料顯示

預期結果:圖表無資料顯示  
實際結果:與預期結果相同

### Summary:測試勾選3個相同Tag name且Tag name 為Allow Multiple Value 為 Ture 的Attributes是否正常運作
Step action:
1. 進入Audience Overlap Analysis頁面  
2. 勾選3個相同Tag name且Tag name 為Allow Multiple Value 為 Ture 的Attributes  
EX:Tag Name:喜歡的英雄,Attribute:鋼鐵人 ; Tag Name:喜歡的英雄,Attribute:索爾 ; Tag Name:喜歡的英雄,Attribute:浩克
3. 檢查圖表有無正確顯示  

預期結果:成功顯示,並且資料正確  
實際結果:與預期結果相同

4. 選取 Audience Overlap Analysis - Label Overlapped 的 Date 為 Today (有打入log的當天)
5. 檢查圖表是否正確顯示

預期結果:成功顯示,並且資料正確  
實際結果:與預期結果相同

6. 選取 Audience Overlap Analysis - Label Overlapped 的 Date 為 Yesterday (沒有打入log的日期)
7. 檢查圖表是否沒有資料顯示

預期結果:圖表無資料顯示  
實際結果:與預期結果相同

### Summary:測試勾選1個Tag name 為Allow Multiple Value 為 Ture 的Attribute 以及 1個Tag name Allow Multiple Value 為 False 的Attribute 是否正常運作
Step action:
1. 進入Audience Overlap Analysis頁面
2. 勾選1個Tag name 為Allow Multiple Value 為 Ture 的Attribute 以及 1個Tag name Allow Multiple Value 為 False 的Attribute  
EX:Tag Name:喜歡的英雄,Attribute:鋼鐵人 ; Tag Name:居住地,Attribute:台北
3. 檢查圖表有無正確顯示

預期結果:成功顯示,並且資料正確  
實際結果:與預期結果相同

4. 選取 Audience Overlap Analysis - Label Overlapped 的 Date 為 Today (有打入log的當天)
5. 檢查圖表是否正確顯示

預期結果:成功顯示,並且資料正確  
實際結果:與預期結果相同

6. 選取 Audience Overlap Analysis - Label Overlapped 的 Date 為 Yesterday (沒有打入log的日期)
7. 檢查圖表是否沒有資料顯示

預期結果:圖表無資料顯示  
實際結果:與預期結果相同

### Summary:測試勾選2個相同Tag name且Tag name 為Allow Multiple Value 為 Ture 的Attributes 以及 1個Tag name Allow Multiple Value 為 False 的Attribute 是否正常運作
Step action:
1. 進入Audience Overlap Analysis頁面
2. 勾選2個相同Tag name且Tag name 為Allow Multiple Value 為 Ture 的Attributes 以及 1個Tag name Allow Multiple Value 為 False 的Attribute  
EX:Tag Name:喜歡的英雄,Attribute:鋼鐵人 ; Tag Name:喜歡的英雄,Attribute:浩克 ; Tag Name:居住地,Attribute:台北
3. 檢查圖表有無正確顯示

預期結果:成功顯示,並且資料正確  
實際結果:與預期結果相同

4. 選取 Audience Overlap Analysis - Label Overlapped 的 Date 為 Today (有打入log的當天)
5. 檢查圖表是否正確顯示

預期結果:成功顯示,並且資料正確  
實際結果:與預期結果相同

6. 選取 Audience Overlap Analysis - Label Overlapped 的 Date 為 Yesterday (沒有打入log的日期)
7. 檢查圖表是否沒有資料顯示

預期結果:圖表無資料顯示  
實際結果:與預期結果相同

### Summary:測試1個Tag name isMultiple為true的Attribute 以及 2個不同Tag name且Tag name isMultiple為false的Attributes 是否正常運作
Step action:
1. 進入Audience Overlap Analysis頁面
2. 勾選1個Tag name 為Allow Multiple Value 為 Ture 的Attribute 以及 2個不同Tag name且Tag name Allow Multiple Value 為 False 的Attributes
EX:Tag Name:喜歡的英雄,Attribute:鋼鐵人 ; Tag Name:性別,Attribute:男 ; Tag Name:居住地,Attribute:台北
3. 檢查圖表有無正確顯示

預期結果:成功顯示,並且資料正確  
實際結果:與預期結果相同

4. 選取 Audience Overlap Analysis - Label Overlapped 的 Date 為 Today (有打入log的當天)
5. 檢查圖表是否正確顯示

預期結果:成功顯示,並且資料正確  
實際結果:與預期結果相同

6. 選取 Audience Overlap Analysis - Label Overlapped 的 Date 為 Yesterday (沒有打入log的日期)
7. 檢查圖表是否沒有資料顯示

預期結果:圖表無資料顯示  
實際結果:與預期結果相同

### Summary:測試2個不同Tag name且Tag name 為Allow Multiple Value 為 Ture 的Attributes 是否正常運作
Step action:
1. 進入Audience Overlap Analysis頁面
2. 勾選2個不同Tag name且Tag name 為Allow Multiple Value 為 Ture 的Attributes
EX:Tag Name:喜歡的英雄,Attribute:鋼鐵人 ; Tag Name:喜歡吃的食物,Attribute: 美式
3. 檢查圖表有無正確顯示

預期結果:成功顯示,並且資料正確  
實際結果:與預期結果相同

4. 選取 Audience Overlap Analysis - Label Overlapped 的 Date 為 Today (有打入log的當天)
5. 檢查圖表是否正確顯示

預期結果:成功顯示,並且資料正確  
實際結果:與預期結果相同

6. 選取 Audience Overlap Analysis - Label Overlapped 的 Date 為 Yesterday (沒有打入log的日期)
7. 檢查圖表是否沒有資料顯示

預期結果:圖表無資料顯示  
實際結果:與預期結果相同

### Summary:測試2個不同Tag name且Tag name 為Allow Multiple Value 為 Ture 的Attributes 以及 1個Tag name Allow Multiple Value 為 False 的Attribute 是否正常運作
Step action:
1. 進入Audience Overlap Analysis頁面
2. 勾選2個不同Tag name且Tag name 為Allow Multiple Value 為 Ture 的Attributes 以及 1個Tag name Allow Multiple Value 為 False 的Attribute  
EX:Tag Name:喜歡的英雄,Attribute:鋼鐵人 ; Tag Name:喜歡吃的食物,Attribute: 美式 ;  Tag Name:性別,Attribute: 男 
3. 檢查圖表有無正確顯示

預期結果:成功顯示,並且資料正確  
實際結果:與預期結果相同

4. 選取 Audience Overlap Analysis - Label Overlapped 的 Date 為 Today (有打入log的當天)
5. 檢查圖表是否正確顯示

預期結果:成功顯示,並且資料正確  
實際結果:與預期結果相同

6. 選取 Audience Overlap Analysis - Label Overlapped 的 Date 為 Yesterday (沒有打入log的日期)
7. 檢查圖表是否沒有資料顯示

預期結果:圖表無資料顯示  
實際結果:與預期結果相同

### Summary:測試3個不同Tag name且Tag name 為Allow Multiple Value 為 Ture 的Attributes 是否正常運作
Step action:
1. 進入Audience Overlap Analysis頁面
2. 勾選3個不同Tag name且Tag name 為Allow Multiple Value 為 Ture 的Attributes  
EX:Tag Name:喜歡的英雄,Attribute:鋼鐵人 ; Tag Name:喜歡吃的食物,Attribute: 美式 ;  Tag Name:性別,Attribute: 男 
3. 檢查圖表有無正確顯示

預期結果:成功顯示,並且資料正確  
實際結果:與預期結果相同

4. 選取 Audience Overlap Analysis - Label Overlapped 的 Date 為 Today (有打入log的當天)
5. 檢查圖表是否正確顯示

預期結果:成功顯示,並且資料正確  
實際結果:與預期結果相同

6. 選取 Audience Overlap Analysis - Label Overlapped 的 Date 為 Yesterday (沒有打入log的日期)
7. 檢查圖表是否沒有資料顯示

預期結果:圖表無資料顯示  
實際結果:與預期結果相同

### Summary:測試勾選2個相同Tag name且Tag name Allow Multiple Value 為 False 的 Attributes 
Step action:
1. 進入Audience Overlap Analysis頁面
2. 勾選2個相同Tag name且Tag name Allow Multiple Value 為 False 的Attributes  
EX:Tag Name:性別,Attribute:女 ; Tag Name:性別,Attribute: 男 
3. 檢查可否勾選2個相同Tag name且Tag name Allow Multiple Value 為 False 的 Attributes 

預期結果:跳出Error
實際結果:與預期結果相同

### Summary:測試1個Tag name isMultiple為true的Attribute 以及 2個相同Tag name且Tag name isMultiple為false的Attributese 是否跳出錯誤訊息
Step action:
1. 進入Audience Overlap Analysis頁面
2. 勾選1個Tag name 為Allow Multiple Value 為 Ture 的Attribute 以及 2個相同Tag name且Tag name Allow Multiple Value 為 False 的Attributes  
EX:Tag Name:喜歡的英雄,Attribute:鋼鐵人 ; Tag Name:性別,Attribute:女 ; Tag Name:性別,Attribute: 男 
3. 檢查可否勾選2個相同Tag name且Tag name Allow Multiple Value 為 False 的 Attributes 

預期結果:跳出Error
實際結果:與預期結果相同

4. 選取 Audience Overlap Analysis - Label Overlapped 的 Date 為 Today (有打入log的當天)
5. 檢查可否勾選2個相同Tag name且Tag name Allow Multiple Value 為 False 的 Attributes 

預期結果:無法勾選兩個相同Tag name且Tag name Allow Multiple Value 為 False 的 Attributes  
實際結果:與預期結果相同

### Summary:測試 Attribute 勾選最多是否為3個  
Step action:
1. 進入Audience Overlap Analysis頁面
2. 勾選3個相同Tag name且Tag name 為Allow Multiple Value 為 Ture 的Attributes
3. 勾選第4個Attribute
4. 檢查是否自動取消勾選第2步驟的其中一個 Attribute ,並且勾選第3步驟的 Attribute 
5. 檢查是否最多勾選為3個 

預期結果:Attribute 最多為3個    
實際結果:與預期結果相同 

6. 選取 Audience Overlap Analysis - Label Overlapped 的 Date 為 Today (有打入log的當天)
7. 勾選第4個Attribute
8. 檢查是否自動取消勾選其中一個 Attribute ,並且勾選第5步驟的 Attribute 
9. 檢查是否最多勾選為3個 

預期結果:Attribute 最多為3個  
實際結果:與預期結果相同
